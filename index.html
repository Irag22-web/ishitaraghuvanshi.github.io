<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ishita Raghuvanshi | Portfolio</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Fraunces:opsz,wght@9..144,300;9..144,500;9..144,700&family=Inter:wght@300;400;600;800&family=Caveat:wght@400;600&display=swap" rel="stylesheet">
  <style>
    :root{--bg:#06060a;--fg:#f3f5ff;--muted:rgba(243,245,255,.68);--c1:#81a6de;--c2:#689139;--c3:#ca7487;--c4:#456ab5;--c5:#d8b152;--glass:rgba(255,255,255,.06);--glass2:rgba(255,255,255,.10);--stroke:rgba(255,255,255,.12);--shadow:0 20px 60px rgba(0,0,0,.55);--radius-xl:24px;--radius-lg:18px;--ease:cubic-bezier(.2,.8,.2,1);}
    *{box-sizing:border-box} html,body{height:100%}
    body{margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;color:var(--fg);
      background:radial-gradient(1400px 900px at 70% 20%, rgba(129,166,222,.18), transparent 60%),
               radial-gradient(1100px 800px at 20% 25%, rgba(69,106,181,.16), transparent 60%),
               radial-gradient(1100px 900px at 35% 75%, rgba(202,116,135,.15), transparent 62%),
               radial-gradient(900px 700px at 72% 78%, rgba(104,145,57,.14), transparent 62%),
               radial-gradient(1000px 700px at 40% 88%, rgba(216,177,82,.10), transparent 62%),
               var(--bg);overflow-x:hidden;}
    .visually-hidden{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
    .bg-blobs{position:fixed;inset:0;z-index:-3;pointer-events:none;overflow:hidden}
    .blob{position:absolute;filter:blur(48px);opacity:.52;mix-blend-mode:screen;border-radius:999px;animation:floaty 12s var(--ease) infinite alternate}
    .b1{width:560px;height:560px;left:-160px;top:80px;background:radial-gradient(circle at 30% 30%, rgba(129,166,222,.95), rgba(69,106,181,0) 70%)}
    .b2{width:620px;height:620px;right:-220px;top:140px;background:radial-gradient(circle at 40% 40%, rgba(202,116,135,.85), rgba(7,7,10,0) 70%);animation-delay:-2s}
    .b3{width:700px;height:700px;left:8%;bottom:-320px;background:radial-gradient(circle at 45% 45%, rgba(104,145,57,.8), rgba(7,7,10,0) 70%);animation-delay:-4s}
    .b4{width:580px;height:580px;right:12%;bottom:-260px;background:radial-gradient(circle at 45% 45%, rgba(129,166,222,.78), rgba(7,7,10,0) 70%);animation-delay:-1s}
    @keyframes floaty{from{transform:translate3d(0,0,0) scale(1)}to{transform:translate3d(0,-18px,0) scale(1.03)}}
    .paper-grain{position:absolute;inset:0;background-image:url("assets/grain.svg");opacity:.22;mix-blend-mode:overlay}
    .pond{position:fixed;inset:0;z-index:-2;pointer-events:none;overflow:hidden}
    .pond-item{position:absolute;width:var(--size,140px);height:auto;opacity:var(--op,.55);transform:translate3d(0,0,0) rotate(var(--rot,0deg));filter:drop-shadow(0 18px 40px rgba(0,0,0,.6));transition:transform 260ms var(--ease),opacity 260ms var(--ease);pointer-events:auto}
    .pond-item:hover{opacity:min(0.95, calc(var(--op, .55) + 0.2));animation:wobble 900ms var(--ease) 1;transform:translate3d(0,-2px,0) rotate(calc(var(--rot,0deg) + 2deg)) scale(1.03)}
    @keyframes wobble{0%{transform:translate3d(0,0,0) rotate(var(--rot,0deg))}25%{transform:translate3d(1px,-1px,0) rotate(calc(var(--rot,0deg) + 2.5deg))}55%{transform:translate3d(-1px,-2px,0) rotate(calc(var(--rot,0deg) - 2deg))}80%{transform:translate3d(0,-1px,0) rotate(calc(var(--rot,0deg) + 1.2deg))}100%{transform:translate3d(0,0,0) rotate(var(--rot,0deg))}}
    .topbar{position:fixed;top:0;left:0;width:100%;padding:18px;display:flex;justify-content:flex-end;z-index:50;pointer-events:none}
    .menu-wrap{pointer-events:auto;position:relative;opacity:0;transform:translateY(-8px);transition:opacity 240ms var(--ease),transform 240ms var(--ease)}
    .menu-wrap.visible{opacity:1;transform:translateY(0)}
    .menu{position:absolute;right:0;top:52px;display:flex;gap:10px;padding:12px;background:rgba(0,0,0,.35);border:1px solid var(--stroke);border-radius:999px;box-shadow:var(--shadow);backdrop-filter:blur(10px);opacity:0;transform:translateY(-6px) scale(.98);pointer-events:none;transition:opacity 220ms var(--ease),transform 220ms var(--ease)}
    .menu.open{opacity:1;transform:translateY(0) scale(1);pointer-events:auto}
    .btn{border:1px solid var(--stroke);background:var(--glass);color:var(--fg);padding:12px 14px;border-radius:999px;cursor:pointer;display:inline-flex;align-items:center;gap:10px;text-decoration:none;user-select:none;transition:transform 220ms var(--ease),background 220ms var(--ease),border-color 220ms var(--ease);position:relative;overflow:hidden;will-change:transform}
    .btn::after{content:"";position:absolute;inset:-40%;background:radial-gradient(circle at var(--mx,50%) var(--my,50%), rgba(255,255,255,.22), transparent 45%);transform:scale(.9);opacity:0;transition:opacity 220ms var(--ease),transform 220ms var(--ease)}
    .btn:hover{transform:translateY(-1px) scale(1.035);background:var(--glass2);border-color:rgba(255,255,255,.22)}
    .btn:hover::after{opacity:1;transform:scale(1)}
    .btn:active{transform:translateY(0) scale(.99)}
    .btn-ghost{padding:10px 12px}.btn-pill{padding:10px 14px}.menu-btn{padding:10px 14px}
    .menu-icon{width:18px;height:12px;border-top:2px solid rgba(243,245,255,.9);border-bottom:2px solid rgba(243,245,255,.9);position:relative;display:inline-block}
    .menu-icon::before{content:"";position:absolute;left:0;right:0;top:4px;border-top:2px solid rgba(243,245,255,.9)}
    .menu-label{font-size:13px;letter-spacing:.04em;opacity:.9}
    main{min-height:100vh}
    .hero{min-height:100vh;display:grid;place-items:center;padding:0 18px}
    .hero-inner{width:min(1000px,92vw);text-align:center}
    .hero-name{font-family:Fraunces,ui-serif,Georgia,serif;font-size:clamp(44px,7vw,90px);font-weight:700;letter-spacing:-.02em;margin:0 0 14px;line-height:1.03;text-shadow:0 20px 70px rgba(0,0,0,.55);position:relative}
    .hero-name::after{content:"";position:absolute;inset:-10px -20px;background:radial-gradient(70% 70% at 20% 30%, rgba(129,166,222,.55), transparent 60%),radial-gradient(70% 70% at 55% 40%, rgba(202,116,135,.42), transparent 60%),radial-gradient(70% 70% at 80% 55%, rgba(104,145,57,.28), transparent 60%);filter:blur(14px);opacity:.58;z-index:-1}
    .hero-tags{margin:0 auto;width:min(980px,92vw);font-size:clamp(14px,1.7vw,18px);font-weight:400;color:var(--muted);line-height:1.6}
    .dot{padding:0 8px;opacity:.7}
    .taglink{color:rgba(243,245,255,.86);text-decoration:none;border-bottom:1px solid rgba(243,245,255,.2);transition:border-color 220ms var(--ease),color 220ms var(--ease)}
    .taglink:hover{color:#fff;border-color:rgba(255,255,255,.5)}
    .melt-target{filter:url(#meltFilter);will-change:opacity,transform,filter}
    .hero-hint{margin-top:34px;display:grid;gap:12px;place-items:center;opacity:.75}
    .hint-pill{font-size:12px;letter-spacing:.2em;text-transform:uppercase;border:1px solid rgba(255,255,255,.14);padding:10px 14px;border-radius:999px;background:rgba(255,255,255,.05)}
    .hint-line{width:1px;height:50px;background:linear-gradient(to bottom, rgba(255,255,255,.55), rgba(255,255,255,0));border-radius:999px}
    .gallery{padding:42px 18px 96px;opacity:0;transform:translateY(12px);transition:opacity 600ms var(--ease),transform 600ms var(--ease)}
    .gallery.visible{opacity:1;transform:translateY(0)}
    .gallery-head{width:min(1100px,92vw);margin:0 auto 22px}
    .section-title{font-size:22px;letter-spacing:.06em;text-transform:uppercase;margin:0 0 8px;opacity:.88}
    .section-subtitle{margin:0;color:var(--muted)}
    .masonry{width:min(1100px,92vw);margin:22px auto 0;column-count:1;column-gap:16px}
    @media (min-width:720px){.masonry{column-count:2}} @media (min-width:1040px){.masonry{column-count:3}}
    .tile{break-inside:avoid;margin:0 0 16px;border-radius:var(--radius-xl);border:1px solid rgba(255,255,255,.12);background:rgba(255,255,255,.05);box-shadow:0 18px 60px rgba(0,0,0,.5);transform-style:preserve-3d;perspective:900px;cursor:pointer;overflow:hidden;position:relative;transition:transform 280ms var(--ease),border-color 280ms var(--ease),background 280ms var(--ease)}
    .tile::before{content:"";position:absolute;inset:-40%;background:radial-gradient(circle at 25% 30%, rgba(255,255,255,.24), transparent 36%),radial-gradient(circle at 70% 55%, rgba(255,255,255,.18), transparent 40%),radial-gradient(circle at 40% 75%, rgba(255,255,255,.10), transparent 45%);opacity:.55;mix-blend-mode:overlay;transform:translateZ(30px);pointer-events:none}
    .tile:hover{border-color:rgba(255,255,255,.24);background:rgba(255,255,255,.07)}
    .tile-inner{padding:18px 18px 20px;transform:translateZ(40px)}
    .tile-pill{display:inline-flex;align-items:center;gap:8px;font-size:12px;letter-spacing:.14em;text-transform:uppercase;padding:8px 12px;border-radius:999px;background:rgba(0,0,0,.35);border:1px solid rgba(255,255,255,.12);backdrop-filter:blur(10px)}
    .tile-title{margin:12px 0 8px;font-size:18px;letter-spacing:-.01em}
    .tile-desc{margin:0;color:var(--muted);line-height:1.55}
    .tile-grad{position:absolute;inset:0;opacity:.85;mix-blend-mode:screen;pointer-events:none}
    .tile--short{min-height:170px}.tile--medium{min-height:220px}.tile--tall{min-height:300px}
    .hidden{display:none}
    .detail{padding:26px 18px 86px}
    .detail-top{width:min(1100px,92vw);margin:0 auto 14px;display:flex}
    .back-btn .back-arrow{font-size:18px;transform:translateY(-1px)}
    .detail-grid{width:min(1100px,92vw);margin:0 auto;display:grid;gap:16px;grid-template-columns:1fr}
    @media (min-width:980px){.detail-grid{grid-template-columns:.95fr 1.05fr;gap:18px}}
    .detail-left,.detail-right{border-radius:var(--radius-xl);border:1px solid rgba(255,255,255,.12);background:rgba(255,255,255,.05);box-shadow:var(--shadow);backdrop-filter:blur(10px)}
    .detail-left{padding:20px 20px 24px}
    .detail-title{margin:0 0 6px;font-size:30px;letter-spacing:-.02em}
    .detail-meta{margin:0 0 14px;color:var(--muted)}
    .detail-desc{margin:0 0 18px;color:rgba(243,245,255,.86);line-height:1.7;white-space:pre-wrap}
    .detail-links{display:flex;flex-wrap:wrap;gap:10px}
    .embed-card{padding:12px}
    .embed-top{display:flex;align-items:center;justify-content:space-between;gap:10px;padding:10px 8px 12px}
    .embed-pill{font-size:12px;letter-spacing:.14em;text-transform:uppercase;opacity:.88}
    .embed-note{font-size:12px;color:var(--muted);text-align:right}
    .embed-frame{width:100%;height:min(62vh,640px);border:1px solid rgba(255,255,255,.14);border-radius:var(--radius-lg);background:rgba(0,0,0,.35)}
    .about{padding:18px 18px 64px}
    .about-inner{width:min(1100px,92vw);margin:0 auto}
    .about-card{display:grid;grid-template-columns:1fr;gap:16px;border-radius:var(--radius-xl);border:1px solid rgba(255,255,255,.12);background:rgba(255,255,255,.05);box-shadow:var(--shadow);backdrop-filter:blur(10px);padding:18px}
    @media (min-width:860px){.about-card{grid-template-columns:.8fr 1.2fr;gap:18px;padding:20px}}
    .about-photo-wrap{border-radius:var(--radius-xl);border:1px solid rgba(255,255,255,.12);background:rgba(0,0,0,.35);display:grid;place-items:center;padding:12px;overflow:hidden}
    .about-photo{width:100%;max-width:420px;height:auto;opacity:.95;filter:grayscale(1) contrast(1.05)}
    .handwritten{font-family:Caveat,cursive;font-size:clamp(20px,2.3vw,30px);line-height:1.25;margin:10px 0 6px;color:rgba(243,245,255,.92)}
    .small{margin:0;color:var(--muted)}
    .footer{margin-top:18px;display:flex;flex-wrap:wrap;gap:10px;align-items:center;justify-content:center;color:var(--muted)}
    .footer-dot{opacity:.5}
    .footer-link{color:rgba(243,245,255,.86);text-decoration:none;border-bottom:1px solid rgba(243,245,255,.2)}
    .footer-link:hover{border-color:rgba(255,255,255,.55)}
    @media (prefers-reduced-motion: reduce){*{animation:none !important; transition:none !important; scroll-behavior:auto !important;}}
  </style>
</head>
<body>
  <svg class="visually-hidden" aria-hidden="true">
    <filter id="meltFilter">
      <feTurbulence id="turbulence" type="fractalNoise" baseFrequency="0.012" numOctaves="2" seed="8" result="noise"/>
      <feDisplacementMap id="displace" in="SourceGraphic" in2="noise" scale="0" xChannelSelector="R" yChannelSelector="G"/>
    </filter>
  </svg>

  <div class="bg-blobs" aria-hidden="true">
    <div class="blob b1"></div><div class="blob b2"></div><div class="blob b3"></div><div class="blob b4"></div>
    <div class="paper-grain"></div>
  </div>

  <div class="pond" aria-hidden="true">
    <img class="pond-item" data-speed="0.37" src="assets/lily-pad.svg" style="left:6%; top:10%; --size:150px; --rot:-8deg; --op:0.42;">
    <img class="pond-item" data-speed="0.29" src="assets/lily-flower.svg" style="left:12%; top:18%; --size:92px; --rot:10deg; --op:0.44;">
    <img class="pond-item" data-speed="0.36" src="assets/lily-pad.svg" style="left:78%; top:9%; --size:175px; --rot:6deg; --op:0.40;">
    <img class="pond-item" data-speed="0.26" src="assets/lily-flower.svg" style="left:72%; top:18%; --size:84px; --rot:-10deg; --op:0.42;">
    <img class="pond-item" data-speed="0.32" src="assets/lily-pad.svg" style="left:82%; top:44%; --size:210px; --rot:-6deg;">
    <img class="pond-item" data-speed="0.18" src="assets/lily-flower.svg" style="left:74%; top:52%; --size:92px; --rot:12deg; --op:0.46;">
    <img class="pond-item" data-speed="0.2" src="assets/lily-pad.svg" style="left:10%; top:48%; --size:200px; --rot:9deg; --op:0.38;">
    <img class="pond-item" data-speed="0.3" src="assets/lily-pad.svg" style="left:58%; top:78%; --size:220px; --rot:4deg; --op:0.38;">
    <img class="pond-item" data-speed="0.25" src="assets/lily-flower.svg" style="left:50%; top:84%; --size:88px; --rot:-12deg; --op:0.44;">
    <img class="pond-item" data-speed="0.3" src="assets/lily-pad.svg" style="left:22%; top:82%; --size:165px; --rot:-14deg; --op:0.36;">
  </div>

  <header class="topbar">
    <div class="menu-wrap" id="menuWrap">
      <button class="btn btn-ghost menu-btn" id="menuBtn" aria-label="Open menu"><span class="menu-icon"></span><span class="menu-label">Menu</span></button>
      <nav class="menu" id="menu" aria-label="Site menu">
        <a class="btn btn-pill" href="#projects">Projects</a>
        <a class="btn btn-pill" href="#about">About Me</a>
      </nav>
    </div>
  </header>

  <main>
    <section class="hero" id="top" aria-label="Landing">
      <div class="hero-inner">
        <h1 class="hero-name melt-target">Ishita Raghuvanshi</h1>
        <p class="hero-tags melt-target">
          <a class="taglink" href="#projects">Designer</a><span class="dot">·</span>
          <a class="taglink" href="#projects">Healthcare Innovator</a><span class="dot">·</span>
          <a class="taglink" href="#projects">Community Advocate</a><span class="dot">·</span>
          <a class="taglink" href="#projects">Biomedical Researcher</a><span class="dot">·</span>
          <a class="taglink" href="#projects">Impact Strategist</a>
        </p>
        <div class="hero-hint"><span class="hint-pill">Scroll</span><span class="hint-line"></span></div>
      </div>
    </section>

    <section class="gallery" id="projects" aria-label="Project gallery">
      <div class="gallery-head">
        <h2 class="section-title">Projects</h2>
        <p class="section-subtitle">A curated mosaic—click a tile to expand.</p>
      </div>
      <div id="masonry" class="masonry" aria-label="Masonry tiles"></div>
    </section>

    <section class="detail hidden" id="detail" aria-label="Project detail view">
      <div class="detail-top">
        <button class="btn btn-ghost back-btn" id="backBtn" aria-label="Back to gallery"><span class="back-arrow">←</span><span>Back</span></button>
      </div>
      <div class="detail-grid">
        <div class="detail-left">
          <h2 class="detail-title" id="detailTitle">Project Title</h2>
          <p class="detail-meta" id="detailMeta">Category • Year</p>
          <p class="detail-desc" id="detailDesc"></p>
          <div class="detail-links" id="detailLinks"></div>
        </div>
        <div class="detail-right">
          <div class="embed-card">
            <div class="embed-top"><span class="embed-pill">Embedded File</span><span class="embed-note">Edit <code>PROJECTS</code> in <code>index.html</code></span></div>
            <iframe id="detailFrame" title="Embedded project file" class="embed-frame" src="assets/sample.pdf"></iframe>
          </div>
        </div>
      </div>
    </section>

    <section class="about" id="about" aria-label="About me">
      <div class="about-inner">
        <div class="about-card">
          <div class="about-photo-wrap"><img class="about-photo" src="assets/ishita.jpg" alt="Portrait"/></div>
          <div class="about-text">
            <h2 class="section-title">About Me</h2>
            <p class="handwritten">Hi — I’m Ishita. I design with intention, build for health and equity, and love turning messy problems into clear, human systems. I’m driven by community, grounded in research, and always chasing impact.</p>
            <p class="small">(Replace this intro + upload your transparent B&W portrait into <code>assets/</code>.)</p>
          </div>
        </div>
        <footer class="footer"><span>© <span id="year"></span> Ishita Raghuvanshi</span><span class="footer-dot">•</span><a class="footer-link" href="#top">Back to top</a></footer>
      </div>
    </section>
  </main>

  <script>
    const COLORS={designer:['#81a6de','#456ab5'],healthcare:['#689139','#d8b152'],community:['#ca7487','#d8b152'],research:['#456ab5','#81a6de'],impact:['#d8b152','#ca7487']};
    const CATEGORY_LABELS={designer:'Designer',healthcare:'Healthcare Innovator',community:'Community Advocate',research:'Biomedical Researcher',impact:'Impact Strategist'};
    
    // Lily wobble (cloud-style spring repel + gentle scroll drift)
    // Inspired by your cloud snippet: nearby cursor repels, motion springs back.
    const lilyItems = Array.from(document.querySelectorAll('.pond-item'));
    const lilyState = new Map();

    const springCfg = { stiffness: 0.12, damping: 0.82 }; // tuned for "soft watercolor"
    const maxDist = 320; // px radius of influence
    const maxForce = 28; // px max offset

    function initLily(){
      lilyItems.forEach((el)=>{
        const rect = el.getBoundingClientRect();
        // store base position via CSS left/top percent; offsets start at 0
        lilyState.set(el, { x:0, y:0, vx:0, vy:0, tx:0, ty:0, cx: rect.left + rect.width/2, cy: rect.top + rect.height/2, speed: parseFloat(el.dataset.speed||'0.25') });
      });
    }
    initLily();

    function updateCenters(){
      lilyItems.forEach((el)=>{
        const rect = el.getBoundingClientRect();
        const s = lilyState.get(el);
        if(!s) return;
        s.cx = rect.left + rect.width/2;
        s.cy = rect.top + rect.height/2;
      });
    }

    let mouseX = window.innerWidth/2, mouseY = window.innerHeight/2;
    window.addEventListener('mousemove', (e)=>{ mouseX = e.clientX; mouseY = e.clientY; });

    window.addEventListener('scroll', ()=>{
      // no-op; scroll is read in RAF for smoothness
    }, {passive:true});

    function lilyTick(){
      const scrollY = window.scrollY || 0;

      lilyItems.forEach((el)=>{
        const s = lilyState.get(el);
        if(!s) return;

        // cursor repel target
        const dx = mouseX - s.cx;
        const dy = mouseY - s.cy;
        const dist = Math.sqrt(dx*dx + dy*dy);

        if(dist < maxDist){
          const force = (maxDist - dist) / maxDist; // 0..1
          s.tx = (-dx) * force * (maxForce / maxDist) * maxDist * 0.12;
          s.ty = (-dy) * force * (maxForce / maxDist) * maxDist * 0.12;
        } else {
          s.tx = 0;
          s.ty = 0;
        }

        // gentle scroll drift (like clouds)
        const driftY = -scrollY * s.speed * 0.06;
        const targetX = s.tx;
        const targetY = s.ty + driftY;

        // spring integration (semi-implicit Euler)
        const ax = (targetX - s.x) * springCfg.stiffness;
        const ay = (targetY - s.y) * springCfg.stiffness;
        s.vx = (s.vx + ax) * springCfg.damping;
        s.vy = (s.vy + ay) * springCfg.damping;
        s.x += s.vx;
        s.y += s.vy;

        el.style.transform = `translate3d(${s.x}px, ${s.y}px, 0) rotate(${getComputedStyle(el).getPropertyValue('--rot') || '0deg'})`;
      });

      requestAnimationFrame(lilyTick);
    }
    // Keep centers fresh on resize (and once after fonts settle)
    window.addEventListener('resize', ()=>{ updateCenters(); });
    setTimeout(updateCenters, 400);
    requestAnimationFrame(lilyTick);

const PROJECTS=[
      {id:'design-systems',title:'Monet UI System',category:'designer',year:'2025',blurb:'A modern design system inspired by watercolor textures and soft gradients.',
       description:'Describe the problem, your role, constraints, process, and results.\n\nAdd links and a file embed on the right.',
       embedSrc:'assets/sample.pdf',links:[{label:'Case Study',href:'#'},{label:'Figma',href:'#'}],height:'tall'},
      {id:'care-pathways',title:'Care Pathways Prototype',category:'healthcare',year:'2024',blurb:'A patient-centered workflow prototype for simplified onboarding and follow-ups.',
       description:'Explain the healthcare context, your research insights, and what you built.',embedSrc:'assets/sample.pdf',links:[{label:'Deck',href:'#'}],height:'medium'},
      {id:'community-program',title:'Community Outreach Program',category:'community',year:'2023',blurb:'A scalable initiative focused on access, inclusion, and engagement.',
       description:'Highlight how you built relationships, organized activities, and measured impact.',embedSrc:'assets/sample.pdf',links:[{label:'Write-up',href:'#'}],height:'short'},
      {id:'biomed-study',title:'Biomedical Study Snapshot',category:'research',year:'2025',blurb:'A research project summary with methods, visuals, and key findings.',
       description:'Summarize methods, hypothesis, and results. Include a poster or PDF on the right.',embedSrc:'assets/sample.pdf',links:[{label:'Poster',href:'#'}],height:'medium'},
      {id:'impact-strategy',title:'Impact Strategy Playbook',category:'impact',year:'2024',blurb:'A strategy framework for prioritizing interventions and tracking outcomes.',
       description:'Show how you set goals, built metrics, and aligned stakeholders.',embedSrc:'assets/sample.pdf',links:[{label:'Framework',href:'#'}],height:'tall'},
    ];

    const menuWrap=document.getElementById('menuWrap');
    const menuBtn=document.getElementById('menuBtn');
    const menu=document.getElementById('menu');
    let menuOpen=false;
    const setMenuOpen=(o)=>{menuOpen=o;menu.classList.toggle('open',o)};
    menuBtn.addEventListener('click',(e)=>{e.stopPropagation();setMenuOpen(!menuOpen)});
    document.addEventListener('click',()=>setMenuOpen(false));
    document.addEventListener('mousemove',(e)=>{
      const t=140; const nearTop=e.clientY<t; const nearRight=(window.innerWidth-e.clientX)<t;
      menuWrap.classList.toggle('visible',nearTop&&nearRight);
    });

    document.addEventListener('mousemove',(e)=>{
      const btn=e.target.closest?.('.btn'); if(!btn) return;
      const r=btn.getBoundingClientRect();
      btn.style.setProperty('--mx',(((e.clientX-r.left)/r.width)*100)+'%');
      btn.style.setProperty('--my',(((e.clientY-r.top)/r.height)*100)+'%');
    });

    const hero=document.querySelector('.hero');
    const gallery=document.querySelector('.gallery');
    const meltTargets=document.querySelectorAll('.melt-target');
    const turbulence=document.getElementById('turbulence');
    const displace=document.getElementById('displace');
    const clamp=(n,min,max)=>Math.max(min,Math.min(max,n));
    function updateMelt(){
      const rect=hero.getBoundingClientRect();
      const vh=window.innerHeight||1;
      const p=clamp((0-rect.top)/(vh*0.75),0,1);
      displace.setAttribute('scale',String(Math.round(p*55)));
      turbulence.setAttribute('baseFrequency',String(0.012+p*0.020));
      const op=1-p*1.10; const y=p*-10;
      meltTargets.forEach(el=>{el.style.opacity=String(clamp(op,0,1));el.style.transform=`translateY(${y}px)`;});
      if(p>0.25) gallery.classList.add('visible'); else gallery.classList.remove('visible');
      requestAnimationFrame(updateMelt);
    }
    requestAnimationFrame(updateMelt);

    const masonry=document.getElementById('masonry');
    const gradientForCategory=(cat)=>{
      const pair=COLORS[cat]||['#81a6de','#ca7487'];
      return `radial-gradient(120% 90% at 25% 20%, ${pair[0]}55, transparent 55%),
              radial-gradient(90% 70% at 70% 60%, ${pair[1]}55, transparent 60%),
              radial-gradient(120% 90% at 40% 85%, #ffffff16, transparent 60%)`;
    };
    const tileHeightClass=(h)=>h==='tall'?'tile--tall':h==='short'?'tile--short':'tile--medium';

    function renderTiles(items){
      masonry.innerHTML='';
      items.forEach(p=>{
        const tile=document.createElement('article');
        tile.className=`tile ${tileHeightClass(p.height)}`;
        tile.setAttribute('role','button'); tile.setAttribute('tabindex','0');
        const grad=document.createElement('div'); grad.className='tile-grad'; grad.style.background=gradientForCategory(p.category);
        const inner=document.createElement('div'); inner.className='tile-inner';
        const pill=document.createElement('div'); pill.className='tile-pill';
        pill.innerHTML=`<span>${CATEGORY_LABELS[p.category]||'Project'}</span><span style="opacity:.65">•</span><span>${p.year||''}</span>`;
        const title=document.createElement('h3'); title.className='tile-title'; title.textContent=p.title;
        const desc=document.createElement('p'); desc.className='tile-desc'; desc.textContent=p.blurb;
        inner.appendChild(pill); inner.appendChild(title); inner.appendChild(desc);
        tile.appendChild(grad); tile.appendChild(inner);

        tile.addEventListener('mousemove',(e)=>{
          const r=tile.getBoundingClientRect();
          const px=(e.clientX-r.left)/r.width; const py=(e.clientY-r.top)/r.height;
          const tiltX=(py-0.5)*-10; const tiltY=(px-0.5)*12;
          tile.style.transform=`rotateX(${tiltX}deg) rotateY(${tiltY}deg) translateY(-2px) scale(1.01)`;
        });
        tile.addEventListener('mouseleave',()=>{tile.style.transform='';});
        tile.addEventListener('click',()=>openDetail(p.id));
        tile.addEventListener('keydown',(e)=>{if(e.key==='Enter'||e.key===' '){e.preventDefault();openDetail(p.id);}});
        masonry.appendChild(tile);
      });
    }
    renderTiles(PROJECTS);

    const detail=document.getElementById('detail');
    const detailTitle=document.getElementById('detailTitle');
    const detailMeta=document.getElementById('detailMeta');
    const detailDesc=document.getElementById('detailDesc');
    const detailLinks=document.getElementById('detailLinks');
    const detailFrame=document.getElementById('detailFrame');
    const backBtn=document.getElementById('backBtn');

    function openDetail(projectId){
      const p=PROJECTS.find(x=>x.id===projectId); if(!p) return;
      document.querySelector('.gallery').classList.add('hidden');
      detail.classList.remove('hidden');
      detailTitle.textContent=p.title;
      detailMeta.textContent=`${CATEGORY_LABELS[p.category]||'Project'} • ${p.year||''}`;
      detailDesc.textContent=p.description;
      detailLinks.innerHTML='';
      (p.links||[]).forEach(l=>{
        const a=document.createElement('a'); a.className='btn btn-pill'; a.href=l.href; a.target='_blank'; a.rel='noreferrer'; a.textContent=l.label;
        detailLinks.appendChild(a);
      });
      detailFrame.src=p.embedSrc || 'assets/sample.pdf';
      history.replaceState({},'',`#project-${p.id}`);
      window.scrollTo({top:0,behavior:'smooth'});
    }
    function closeDetail(){
      detail.classList.add('hidden');
      document.querySelector('.gallery').classList.remove('hidden');
      history.replaceState({},'','#projects');
      window.scrollTo({top:document.getElementById('projects').offsetTop-8,behavior:'smooth'});
    }
    backBtn.addEventListener('click',closeDetail);
    (function(){const h=(location.hash||'').trim(); if(h.startsWith('#project-')) openDetail(h.replace('#project-',''));})();
    document.getElementById('year').textContent=String(new Date().getFullYear());
  </script>
</body>
</html>
